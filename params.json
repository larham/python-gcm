{"body":"python-gcm\r\n======================\r\n[![Build Status](https://secure.travis-ci.org/geeknam/python-gcm.png?branch=master)](http://travis-ci.org/geeknam/python-gcm)\r\n\r\nPython client for Google Cloud Messaging for Android (GCM)\r\n\r\nUsage\r\n------------\r\nRTFM [here](http://developer.android.com/guide/google/gcm/gcm.html)\r\n        \r\nBasic\r\n```python\r\ngcm = GCM(API_KEY)\r\ndata = {'param1': 'value1', 'param2': 'value2'}\r\n\r\n# Plaintext request, handles retry loops internally\r\ngcm.request_plaintext(registration_id=reg_id, data=data)\r\n\r\n# JSON request; caller should handle retry loops (see multicast below)\r\nreg_ids = ['12', '34', '69']\r\ngcm_response = gcm.request_json(registration_ids=reg_ids, data=data)\r\n\r\n# Extra arguments\r\ngcm_response = gcm.request_json(\r\n    registration_ids=reg_ids, data=data,\r\n    collapse_key='up_to_you', delay_while_idle=True, time_to_live=3600\r\n)\r\n```\r\n\r\nError handling\r\n```python\r\n# Plaintext request\r\nreg_id = '12345'\r\ntry:\r\n    canonical_id = gcm.request_plaintext(registration_id=reg_id, data=data)\r\n    if canonical_id:\r\n        # Repace reg_id with canonical_id in your database\r\n        entry = entity.filter(registration_id=reg_id)\r\n        entry.registration_id = canonical_id\r\n        entry.save()\r\nexcept GCMNotRegisteredException:\r\n    # Remove this reg_id from database\r\n    entity.filter(registration_id=reg_id).delete()\r\nexcept GCMUnavailableException:\r\n    # Resent the message\r\n```\r\n\r\nJSON multicast request\r\n\r\nFor multicasting the same notification to many users, the caller should employ a retry loop.\r\n\r\nSee client_sample.py, used below as send_notification(). Results from each iteration are processed\r\nby the client.\r\n\r\n```python\r\n\r\nids = ['a12', 'b34', 'c56'] # real gcm registration ids are guid strings\r\ndevices_by_reg_id = dict(a12=device12, b34=device34, c56=device56) # where device<id> indicates some database record\r\nfrom multicast_client_sample import send_notification\r\nsend_notification(ids, devices_by_reg_id, data)\r\n\r\n\r\n```\r\n\r\nExceptions\r\n------------\r\nRead more on response errors [here](http://developer.android.com/guide/google/gcm/gcm.html#success)\r\n\r\nThere are two categories of errors:\r\n\r\n* GCMRetriableException # the ones you can retry\r\n\r\n* GCMNoRetryException   # the fatal ones (most)\r\n\r\n* GCMMalformedJsonException\r\n* GCMConnectionException\r\n* GCMAuthenticationException\r\n* GCMTooManyRegIdsException\r\n* GCMNoCollapseKeyException\r\n* GCMInvalidTtlException\r\n* GCMMissingRegistrationException\r\n* GCMMismatchSenderIdException\r\n* GCMNotRegisteredException\r\n* GCMMessageTooBigException\r\n* GCMInvalidRegistrationException\r\n* GCMUnavailableException\r\n\r\n","tagline":"Python client for Google Cloud Messaging for Android (GCM) with emphasis on multicasting (same payload sent to up to 1000 users)","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Python-gcm","google":""}