{"google":"","body":"python-gcm\r\n======================\r\n[![Build Status](https://secure.travis-ci.org/geeknam/python-gcm.png?branch=master)](http://travis-ci.org/geeknam/python-gcm)\r\n\r\nPython client for Google Cloud Messaging for Android (GCM)\r\n\r\nUsage\r\n------------\r\nRTFM [here](http://developer.android.com/guide/google/gcm/gcm.html)\r\n        \r\nBasic\r\n```python\r\ngcm = GCM(API_KEY)\r\ndata = {'param1': 'value1', 'param2': 'value2'}\r\n\r\n# Plaintext request\r\ngcm.plaintext_request(registration_id=reg_id, data=data)\r\n\r\n# JSON request\r\nreg_ids = ['12', '34', '69']\r\nresponse = gcm.json_request(registration_ids=reg_ids, data=data)\r\n\r\n# Extra arguments\r\nres = gcm.json_request(\r\n    registration_ids=reg_ids, data=data,\r\n    collapse_key='uptoyou', delay_while_idle=True, time_to_live=3600\r\n)\r\n```\r\n\r\nError handling\r\n```python\r\n# Plaintext request\r\nreg_id = '12345'\r\ntry:\r\n    canonical_id = gcm.plaintext_request(registration_id=reg_id, data=data)\r\n    if canonical_id:\r\n        # Repace reg_id with canonical_id in your database\r\n        entry = entity.filter(registration_id=reg_id)\r\n        entry.registration_id = canonical_id\r\n        entry.save()\r\nexcept GCMNotRegisteredException:\r\n    # Remove this reg_id from database\r\n    entity.filter(registration_id=reg_id).delete()\r\nexcept GCMUnavailableException:\r\n    # Resent the message\r\n\r\n# JSON request\r\nreg_ids = ['12', '34', '69']\r\nresponse = gcm.json_request(registration_ids=reg_ids, data=data)\r\n\r\n# Handling errors\r\nif 'errors' in response:\r\n    for error, reg_ids in response.items():\r\n        # Check for errors and act accordingly\r\n        if error is 'NotRegistered':\r\n            # Remove reg_ids from database\r\n            for reg_id in reg_ids:\r\n                entity.filter(registration_id=reg_id).delete()\r\nif 'canonical' in response:\r\n    for canonical_id, reg_id in response.items():\r\n        # Repace reg_id with canonical_id in your database\r\n        entry = entity.filter(registration_id=reg_id)\r\n        entry.registration_id = canonical_id\r\n        entry.save()\r\n```\r\n\r\nExceptions\r\n------------\r\nRead more on response errors [here](http://developer.android.com/guide/google/gcm/gcm.html#success)\r\n\r\n\r\n* GCMMalformedJsonException\r\n* GCMConnectionException\r\n* GCMAuthenticationException\r\n* GCMTooManyRegIdsException\r\n* GCMNoCollapseKeyException\r\n* GCMInvalidTtlException\r\n* GCMMissingRegistrationException\r\n* GCMMismatchSenderIdException\r\n* GCMNotRegisteredException\r\n* GCMMessageTooBigException\r\n* GCMInvalidRegistrationException\r\n* GCMUnavailableException\r\n\r\n","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Python-gcm","tagline":"Python client for Google Cloud Messaging for Android (GCM) with emphasis on multicasting (same payload sent to up to 1000 users)"}